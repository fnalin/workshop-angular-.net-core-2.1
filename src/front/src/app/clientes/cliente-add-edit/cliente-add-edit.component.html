<app-loading [showLoadingIndicator]="showLoadingIndicator" [texto]="percentDone + ' %'"></app-loading>

<h2 class="text-center">{{ title }} / {{ subtitle }}</h2>

<div>

    <form class="shadow  p-3 m-3 bg-light" (submit)="save()" novalidate [formGroup]="clienteForm">

        <div class="row">
            <div class="col-md-6">

                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" class="form-control" formControlName="nome" id="nomeInput" name="nome" required
                        autofocus>
                    <!-- <div *ngIf="nome.invalid && (nome.dirty || nome.touched)" class="alert alert-danger m-2">
                        <p *ngIf="nome.errors.required" class="p-1">
                            <small>
                                Nome é requirido
                            </small>
                        </p>

                        <p *ngIf="nome.errors.stringComNumeros" class="p-1">
                            <small>
                                Nome inválido
                            </small>
                        </p>

                        <p *ngIf="nome.errors.minlength" class="p-1">
                            <small>
                                Nome deve ter ao menos 5 caracteres
                            </small>
                        </p>
                    </div> -->
                    <!-- <div [hidden]="nome.valid || nome.pristine"
                    class="alert alert-danger mt-2">
                    O nome é requirido e deve ser informado ao menos 5 caracteres.
                </div> -->
                </div>

                <div class="form-group">
                    <label>SobreNome:</label>
                    <input type="text" class="form-control" formControlName="sobrenome" name="sobrenome" required>
                    <!-- <div [hidden]="sobrenome.valid || sobrenome.pristine"
                    class="alert alert-danger mt-2">
                    O SobreNome é requerido! {{sobrenome}}
                </div> -->
                </div>

                <div class="form-group">
                    <label>Idade:</label>
                    <input type="number" class="form-control" formControlName="idade" name="idade" required>
                    <!-- <div [hidden]="idade.valid || idade.pristine"
                    class="alert alert-danger mt-2">
                    A idade é requerida e precisa ser acima de 18!
                </div> -->
                </div>

                <div class="form-group">
                    <label>Sexo:</label>
                    <select class="form-control" formControlName="sexo" required>
                        <option [ngValue]="null">Selecione ...</option>
                        <option *ngFor="let key of keys" [value]="key">{{generos[key]}}</option>
                    </select>
                </div>

            </div>

            <div class="col-md-6">
                <label>Foto</label>
                <input #fileInput
                    (change)="handleFile($event.target.files[0])"
                    hidden type="file" class="form-control" accept="image/*">
                
                <div class="col-6">
                    <button (click)="fileInput.click()" type="button"  class="btn btn-block btn-outline-success">Selecione...</button>
                </div>
                <div class="col-12 p-3" [ngClass]="(!previewBase64)?'ng-invalid':''">
                    <img [src]="getSafeContent()" class="img-fluid shadow">
                </div>
            </div>
        </div>

        <hr>

        <div class="row justify-content-between">
            <div class="col-md-4">
                <button [disabled]="clienteForm.invalid" class="btn btn-block btn-outline-primary">Salvar</button>
            </div>
            <div class="col-md-4">
                    <a class="btn btn-block btn-outline-secondary" [routerLink]="['/clientes']">Cancelar</a>
            </div>
        </div>
    </form>

</div>
